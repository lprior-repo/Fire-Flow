# Kestra Workflow Configuration Defaults
# Centralized configuration for all bitter-truth workflows
#
# This file defines all default values, paths, and constraints
# for the modular workflow system. Use to override in execution.

# Paths (configurable per environment)
paths:
  tools_dir: "./bitter-truth/tools"
  temp_dir: "/tmp"
  contracts_dir: "./bitter-truth/contracts"
  archive_dir: "/tmp/generated-tools"

# Outputs (relative to temp_dir)
outputs:
  tool: "tool.nu"           # Generated tool
  output: "output.json"     # Tool execution output
  logs: "logs.json"         # Tool execution logs
  feedback: "feedback.txt"  # Self-healing feedback

# Timeouts
timeouts:
  generation: 300s          # AI code generation (5 min)
  execution: 60s            # Tool execution (1 min)
  validation: 30s           # Contract validation (30 sec)

# AI Parameters
ai:
  model: "local/qwen3-coder"
  max_attempts: 5
  timeout_seconds: 300

# Validation
validation:
  contract_required: true
  draconian: true           # Fail on any contract violation
  dry_run_default: false

# Logging
logging:
  level: "info"
  structured: true          # JSON output
  include_trace_id: true
  include_duration: true

# Testing
testing:
  enabled_by_default: false
  dry_run_on_test: true
  use_fixtures: true
  fixtures_dir: "./bitter-truth/fixtures"
  temp_dir_test: "/tmp/bitter-truth-test"

# Environment Variables (set in task runtime)
env:
  XDG_DATA_HOME: "/tmp/opencode-data"
  XDG_CACHE_HOME: "/tmp/opencode-cache"
  XDG_STATE_HOME: "/tmp/opencode-state"
  SODA_SEND_ANONYMOUS_USAGE_STATS: "false"
